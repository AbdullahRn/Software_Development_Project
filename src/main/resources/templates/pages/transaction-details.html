<div th:fragment="content">

    <h2 style="margin-bottom: 20px;">Transaction Details</h2>

    <div class="card" style="padding: 20px; border-radius: 12px; background: #222; color: #eee;">

        <p><b>ID:</b> <span th:text="${transaction.id}"></span></p>
        <p><b>Type:</b> <span th:text="${transaction.transactionType}"></span></p>
        <p><b>Status:</b> <span th:text="${transaction.status}"></span></p>
        <p><b>Total Products:</b> <span th:text="${transaction.totalProducts}"></span></p>
        <p><b>Total Price:</b> <span th:text="${transaction.totalPrice}"></span></p>

        <p><b>Discount:</b>
            <span th:text="${transaction.discount != null ? transaction.discount : 0}"></span>
        </p>

        <p><b>Promotion:</b>
            <span th:text="${transaction.promotion != null and transaction.promotion ? 'Yes' : 'No'}"></span>
        </p>

        <p><b>Sale Date:</b>
            <span th:text="${transaction.saleDate != null ? transaction.saleDate : 'N/A'}"></span>
        </p>

        <p><b>Created At:</b>
            <span th:text="${transaction.createdAt != null ? #temporals.format(transaction.createdAt, 'yyyy-MM-dd HH:mm') : 'N/A'}"></span>
        </p>

        <hr style="margin: 20px 0; border-color: #444;" />

        <h4>Product Info</h4>
        <p><b>Name:</b> <span th:text="${product != null ? product.name : 'N/A'}"></span></p>
        <p><b>SKU:</b> <span th:text="${product != null ? product.sku : 'N/A'}"></span></p>
        <p><b>Price:</b> <span th:text="${product != null ? product.price : 'N/A'}"></span></p>

        <hr style="margin: 20px 0; border-color: #444;" />

        <h4>User Info</h4>
        <p><b>Name:</b> <span th:text="${user != null ? user.name : 'N/A'}"></span></p>
        <p><b>Email:</b> <span th:text="${user != null ? user.email : 'N/A'}"></span></p>

        <hr style="margin: 20px 0; border-color: #444;" />

        <div th:if="${supplier != null}">
            <h4>Supplier Info</h4>
            <p><b>Name:</b> <span th:text="${supplier.name}"></span></p>
            <p><b>Contact:</b> <span th:text="${supplier.contactInfo}"></span></p>
            <p><b>Address:</b> <span th:text="${supplier.address}"></span></p>
        </div>

        <hr style="margin: 20px 0; border-color: #444;" />

        <form method="post" th:action="@{/transaction/update-status}">
            <input type="hidden" name="transactionId" th:value="${transaction.id}" />

            <label style="font-weight: bold;">Update Status:</label>
            <select name="status" style="padding: 8px; border-radius: 6px; margin: 10px 0;">
                <option value="PENDING">PENDING</option>
                <option value="COMPLETED">COMPLETED</option>
                <option value="CANCELLED">CANCELLED</option>
            </select>

            <button type="submit"
                    style="padding: 10px 15px; border: none; border-radius: 6px; background: #0066ff; color: white;">
                Update
            </button>
        </form>

    </div>

</div>
